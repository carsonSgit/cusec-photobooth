{
  "permissions": {
    "allow": [
      "Bash(npx create-next-app:*)",
      "Bash(npm install:*)",
      "Bash(pnpm create:*)",
      "Bash(pnpm install)",
      "Bash(pnpm build:*)",
      "Bash(pnpm add:*)",
      "Bash(cat:*)",
      "Bash(C:/Users/carso/Documents/cusec-photobooth/components/photo-preview.tsx <<'ENDOFFILE'\n'use client';\n\nimport { useEffect, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { RotateCcw, Save } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card } from '@/components/ui/card';\nimport { usePhotoboothStore } from '@/lib/store';\nimport { generatePhotoStrip } from '@/lib/canvas';\nimport { pageVariants, buttonVariants } from '@/lib/animations';\n\nexport function PhotoPreview\\(\\) {\n  const { photos, photoStrip, setPhotoStrip, setCurrentScreen, clearPhotos } = usePhotoboothStore\\(\\);\n  const [isGenerating, setIsGenerating] = useState\\(false\\);\n  const [error, setError] = useState<string | null>\\(null\\);\n\n  useEffect\\(\\(\\) => {\n    if \\(photos.length === 3 && !photoStrip\\) {\n      setIsGenerating\\(true\\);\n      generatePhotoStrip\\(photos\\)\n        .then\\(\\(strip\\) => {\n          setPhotoStrip\\(strip\\);\n          setIsGenerating\\(false\\);\n        }\\)\n        .catch\\(\\(err\\) => {\n          console.error\\('Error generating photo strip:', err\\);\n          setError\\('Failed to generate photo strip. Please try again.'\\);\n          setIsGenerating\\(false\\);\n        }\\);\n    }\n  }, [photos, photoStrip, setPhotoStrip]\\);\n\n  const handleRetake = \\(\\) => {\n    clearPhotos\\(\\);\n    setCurrentScreen\\('camera'\\);\n  };\n\n  const handleSave = \\(\\) => {\n    setCurrentScreen\\('save'\\);\n  };\n\n  if \\(isGenerating\\) {\n    return \\(\n      <motion.div \n        className=\"min-h-screen bg-gradient-brand flex items-center justify-center p-4\"\n        variants={pageVariants}\n        initial=\"initial\"\n        animate=\"animate\"\n      >\n        <Card className=\"glass-strong border-0 shadow-premium-lg p-8 text-center\">\n          <div className=\"relative w-20 h-20 mx-auto mb-6\">\n            <motion.div\n              className=\"absolute inset-0 rounded-full border-4 border-transparent border-t-cusec-red\"\n              animate={{ rotate: 360 }}\n              transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\n            />\n          </div>\n          <p className=\"text-lg font-display font-semibold text-white\">\n            Creating your photo strip...\n          </p>\n        </Card>\n      </motion.div>\n    \\);\n  }\n\n  if \\(error\\) {\n    return \\(\n      <motion.div \n        className=\"min-h-screen bg-gradient-brand flex items-center justify-center p-4\"\n        variants={pageVariants}\n        initial=\"initial\"\n        animate=\"animate\"\n      >\n        <Card className=\"glass-strong border-0 shadow-premium-lg p-8 text-center max-w-md\">\n          <p className=\"text-lg text-cusec-red mb-4 font-display font-semibold\">{error}</p>\n          <Button onClick={handleRetake}>Try Again</Button>\n        </Card>\n      </motion.div>\n    \\);\n  }\n\n  return \\(\n    <motion.div \n      className=\"min-h-screen bg-gradient-brand flex flex-col items-center justify-center p-4\"\n      variants={pageVariants}\n      initial=\"initial\"\n      animate=\"animate\"\n      exit=\"exit\"\n    >\n      <div className=\"max-w-2xl w-full\">\n        <motion.h2 \n          className=\"text-4xl font-display font-bold text-center text-white mb-6\"\n          initial={{ opacity: 0, y: -20 }}\n          animate={{ opacity: 1, y: 0 }}\n        >\n          Looking Great! ðŸŒŸ\n        </motion.h2>\n\n        <Card className=\"glass-strong border-0 shadow-premium-lg p-4 mb-6\">\n          {photoStrip && \\(\n            <motion.img\n              src={photoStrip}\n              alt=\"Photo strip\"\n              className=\"w-full h-auto rounded-xl\"\n              initial={{ opacity: 0, scale: 0.9 }}\n              animate={{ opacity: 1, scale: 1 }}\n              transition={{ delay: 0.2 }}\n            />\n          \\)}\n        </Card>\n\n        <div className=\"flex gap-4 mb-4\">\n          <motion.div className=\"flex-1\" variants={buttonVariants} whileHover=\"hover\" whileTap=\"tap\">\n            <Button\n              variant=\"outline\"\n              size=\"lg\"\n              className=\"w-full bg-white/10 border-2 border-white text-white hover:bg-white hover:text-cusec-navy font-display font-semibold\"\n              onClick={handleRetake}\n            >\n              <RotateCcw className=\"mr-2 h-5 w-5\" />\n              Retake Photos\n            </Button>\n          </motion.div>\n          <motion.div className=\"flex-1\" variants={buttonVariants} whileHover=\"hover\" whileTap=\"tap\">\n            <Button\n              size=\"lg\"\n              className=\"w-full bg-gradient-accent border-0 shadow-premium font-display font-semibold relative overflow-hidden group\"\n              onClick={handleSave}\n            >\n              <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700\"></div>\n              <Save className=\"mr-2 h-5 w-5 relative z-10\" />\n              <span className=\"relative z-10\">Save & Share</span>\n            </Button>\n          </motion.div>\n        </div>\n\n        <motion.p \n          className=\"text-center text-white/90 text-sm font-sans\"\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 0.4 }}\n        >\n          Love your photos? Save them to your device or share via email!\n        </motion.p>\n      </div>\n    </motion.div>\n  \\);\n}\nENDOFFILE)"
    ]
  }
}
